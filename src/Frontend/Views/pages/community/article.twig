{% extends "Frontend/Views/layouts/app.twig" %}
{% block body %}
    <div class="page-content">
        <div class="left-side">
            <article class="default-section">
                <div class="card">
                    <a href="/article/read/{{article.id}}/{{article.slug}}">
                        <div class="card-image discussion-image card-image-top" style="background-color: rgb(134, 53, 24); background-image: url({{article.image}}); color: rgb(255, 255, 255); background-position: center">
                            <div>
                                <h2>{{article.title}}</h2>
                                {{article.description}}
                            </div>
                        </div>
                        <div class="card-header">
                            <div class="card-header-title-container">
                                <div id="textbox">
                                    <p class="timestamp"><img src="/assets/images/time.gif" /> {{article.created_at|date("d-M H:i")}}</p>
                                    <p class="author">
                                        by <b><a href="">{{article.user.username}}</a></b>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </a>
                    <div class="card-content">
                        {{article.content|raw}}
                    </div>
                </div>
            </article>
        </div>

        <div class="right-side" style="margin-bottom: 7px;">
            <aside class="default-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-title-container" style="position: relative;">
                            <div class="card-header-title">{{ lang('article.comments')}}</div>
                        </div>
                    </div>
                    {% for comment in comments %}
                    <div class="card-content no-spacing oddeven">
                        <div class="author">
                            <div class="avatar">
                                <img alt="User avatar" class="avatar avatar-m" src="{{ config('hotel_settings.imaging_url') }}/?figure={{ comment.user.look }}&amp;head_direction=3&amp;direction=2&amp;crr=3&amp;gesture=sml&amp;size=m&amp;headonly=0">
                            </div>
                            <div class="info">
                                <span class="username"><a href="/user/{{ comment.user.username }}">{{ comment.user.username }}</a></span>
                                <span>{{ comment.content }}</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% if comments is empty %}
                    <div class="card-content">
                        There are no comments yet, are you the first?
                    </div>
                    {% endif %}
                </div>
            </aside>

            {% if user %}
            <aside class="default-section">
                <form method="post" action="{{ url_for('comment_create') }}">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-title-container" style="position: relative;">
                            <div class="card-header-title">Comment</div>
                        </div>
                    </div>
                    <div class="card-content">
                        <textarea name="content" placeholder="Comment here..."></textarea>
                    </div>
                </div>
                <div class="card-footer no-spacing">
                    <input type="hidden" name="article_id" value="{{ article.id }}">
                    <button type="submit" variant="success" class="btn btn-fw btn-success">Comment</button>
                </div>
                </form>
            </aside>
            {% endif %}

            <aside class="default-section">
                <div class="card">
                    <div class="card-header"></div>
                    <div class="aside-content">
                        <div class="related-articles-container">
                            {% for item in list %}
                                <a href="{{ url_for('article-view', {'id': item.id, 'slug': item.slug}) }}" class="related-article-container">
                                    <div class="related-article-thumbnail" style="background-image: url({{item.image}});"></div>
                                    <div class="related-article-details">
                                        <div class="related-article-title">{{item.title}} </div>
                                        <div class="related-article-date">{{item.created_at|date("d-M H:i")}}</div>
                                    </div>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </aside>

        </div>

    </div>
{% endblock %}